# 服务器上的配置

## 1 打开公网监听
🌐 你当前的服务信息：
你运行的是：
```sh
python -m uvicorn server:app --reload
```
系统输出的是：
```sh
Uvicorn running on http://127.0.0.1:8000
```
这表示你的服务 只监听了本地回环地址 127.0.0.1，也就是说：

🟥 只有这台服务器自己能访问这个服务，外部（例如你电脑上）无法通过公网 IP 或域名访问它。

✅ 如果你想让公网也能访问，应该这样启动：
```sh
python -m uvicorn server:app --host 0.0.0.0 --port 8000 --reload
```
解释一下参数：
- `--host 0.0.0.0`：监听所有网络接口（包括公网 IP）
- `--port 8000`：仍然监听 8000 端口
- `--reload`：开发模式下自动重载

运行后会输出：
```sh
Uvicorn running on http://0.0.0.0:8000
```
这时你就可以通过公网访问，例如：
```py
requests.post("http://hz-t3.matpool.com:8000/items", json=data)
```
🔒 额外注意：
- 安全性：此举将 API 暴露在互联网上，请确认你加了鉴权或限制，避免别人滥用。
- 防火墙配置：确保云服务器的防火墙（或云平台控制面板）已放行 8000 端口。
- 如果你不确定是否开放了 8000 端口，可以用这个命令在本地测试是否能访问：
```sh
curl http://hz-t3.matpool.com:8000
```

## 2 本地端口转发

如果你的服务没有监听公网，你可以通过 SSH 端口转发来测试：
在你的本地电脑上执行：
```sh
ssh -L 8000:localhost:8000 -p 26160 root@hz-t3.matpool.com
```
这表示你本地访问 localhost:8000，会被转发到云服务器的 localhost:8000

然后你原来的代码不需要修改，仍然使用：

```py
response = requests.post("http://localhost:8000/items", json=data)
```

