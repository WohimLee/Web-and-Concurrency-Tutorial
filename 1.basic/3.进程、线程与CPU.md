
## 进程、线程与 CPU
从“物理上”看，进程和线程都不是一块独立硬件，而是操作系统管理的一组状态。

1. 进程的物理表现  
- 一套独立虚拟内存空间（页表映射到物理内存页）。  
- 内核里的进程控制块（PCB，记录 PID、打开文件、权限、调度信息等）。  
- 资源容器，本身不直接在 CPU 上执行指令。

2. 线程的物理表现  
- 内核里的线程控制块（TCB）。  
- 自己的寄存器上下文、程序计数器、栈。  
- 共享所属进程的代码段/堆/文件句柄。  
- 线程才是 CPU 调度和执行的直接对象。

3. 跟 CPU 的关系  
- 某一时刻，一个 CPU 逻辑核只能运行一个线程。  
- 多核 CPU 可以同时运行多个线程，才叫真正并行。  
- 核心数不够时，靠时间片轮转形成“并发”。  
- 线程切换要保存/恢复寄存器、切换内核态状态；进程切换通常还涉及地址空间切换，开销更大。

4. 进程和线程的关系：

- 进程是资源容器，线程是执行单元。  
- 一个进程至少有一个线程（主线程）。  
- 一个进程可以有多个线程并发执行。  
- 同一进程内线程共享内存和资源。  
- 不同进程之间默认隔离，通信要用 IPC。  

一句话：  
`进程负责“装资源”，线程负责“跑代码”`。 CPU 实际调度执行的是线程。

5. 一句话总结  
- 进程是“资源与隔离边界”，线程是“CPU 执行单元”。  
- CPU 真正跑的是线程，进程通过线程间接使用 CPU。  

